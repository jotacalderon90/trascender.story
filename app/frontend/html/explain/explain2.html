<!--use:_views/m.full-->

<!--define:title-->
	Mapas
<!--/define:title-->

<!--define:css-->

	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.2/dist/leaflet.css" />
	<link rel="stylesheet" href="css/timeline.css" />
	
	<style>
		html,body{
			height: 100%;
			margin: 0;
			overflow: hidden;
		}
		#full{
			position: absolute;
			top: 0;
			left: 0;
			
			width: 100%;
			height: 100%;
			
			z-index: 2;
			opacity: 0.95;
			
			background: url("https://static.vecteezy.com/system/resources/previews/000/544/006/non_2x/futuristic-digital-transformation-abstract-technology-blue-background-artificial-intelligence-and-big-data-concept-business-growth-computer-and-hacking-cyber-security-theme-vector-illustration.jpg") no-repeat center center fixed; 
			-webkit-background-size: cover;
			-moz-background-size: cover;
			-o-background-size: cover;
			background-size: cover;
		}
		
		/********/
		/*LOADER*/
		#background{
			position: fixed;
			width: 100%;
			height: 100%;
			background: black;
			z-index: 1000;
			opacity: 0.5;
			display: none;
		}
		#loading{
			position: fixed;
			z-index: 2000;
			top: 50%;
			width: 100%;
			text-align: center;
			display: none;
		}
		#loading i{
			font-size: 100px;
		}
		
		/******/
		/*MAPA*/
		#map{
			width: 300px;
			height: 300px;
			right: 0;
			position: absolute;
			z-index: 3;
			background: black;
		}
		.leaflet-marker-icon,
		.leaflet-marker-shadow {
			-webkit-animation: fadein 2s; /* Safari, Chrome and Opera > 12.1 */
			-moz-animation: fadein 2s; /* Firefox < 16 */
			-ms-animation: fadein 2s; /* Internet Explorer */
			-o-animation: fadein 2s; /* Opera < 12.1 */
			animation: fadein 2s;
		}
		@keyframes fadein {
			from { opacity: 0;}
			to   { opacity: 1;}
		}
		
		/************/
		/*MAPA CONCEPTUAL*/
		#myDiagramDiv{
			position: absolute;
			top: 0;
			left: 0;
			width: 95%;
			height: 100%;
			z-index: 4;
			overflow: hidden;
		}
		#myDiagramDiv div{
			overflow: hidden!important;
		}
		
		/***********/
		/*BUSCADOR*/
		
		#mdCog .modal-content {
			background: black;
			opacity: 0.5;
		}
		#mdCog .modal-content .form-control{
			background: inherit;
			color: white;
		}
		
		/*AUTOCOMPLETAR*/
		.ui-autocomplete{
			z-index: 9999;
		}
		.ui-widget-content{
			background: black;
			opacity: 0.5;
			color: white;
		}
		
		/*********/
		/*TIMELINE*/
		#dvTimeline{
			position: absolute;
			top: 0px;
			left: 0px;
			width: 30%;
			height: 100%;
			z-index: 5;
			display: none;
			overflow: hidden;
			overflow-y: scroll;
		}
		#timeline{
			position: absolute;
			width: 100%;
			z-index: 5;
			word-wrap: break-word;
		}
		.timeline-series dt{
			padding-top: 100px;
		}
		.timeline-wrapper-last{
			height: 1000px;
		}
		.bk{
			position: fixed;
			width: 30%;
			height: 100%;
			background: black;
			z-index: 4;
		}
		.timeline-event{
			padding-top: 50px;;
		}
		.timeline-event-content{
			display: block;
		}
	</style>
	
<!--/define:css-->

<!--define:head-->
	<script src="https://unpkg.com/leaflet@1.0.2/dist/leaflet.js"></script>
<!--/define:head-->

<!--define:main-->
	<canvas id="matrix"></canvas>
	<div id="background"></div>
	<div id="loading">
		<i class="fa fa-spin fa-spinner"></i>
	</div>
	<div id="full" data-ng-app="myApp" data-ng-controller="explainCtrl as ctrl">
		
		<div id="dvTimeline">
			<div class="bk"></div>
			<div id="timeline" class="timeline-container">
				<div class="timeline-wrapper" data-ng-repeat="year in ctrl.collection.years">
					<h2 class="timeline-time"><span>{{year.label}}</span></h2>
					<dl class="timeline-series" data-ng-repeat="data in year.data">
						<dt id="{{data._id}}" class="timeline-event start-open">
							<a>{{data.title}}</a>
						</dt>
						<dd class="timeline-event-content" id="{{data._id}}EX">
							<h3>{{data.fechat}}</h3>
							<img data-ng-src="{{data.img}}" alt="{{data.resume}}. {{data.fecha}}" title="{{data.resume}}. {{data.fecha}}" data-ng-click="ctrl.collection.setDOC(data)"/>
							<!--<small>{{data.resume}}.</small>-->
							<ul class="list-unstyled">
								<li data-ng-repeat="tag in data.tag">
									<a class="label label-success" href="/explain?tag={{tag}}" >{{tag}}</a>
								</li>
								<li data-ng-repeat="font in data.font">
									<a class="label label-primary" href="{{font}}" target="_blank">ver {{$index+1}}Â° referencia</a>
								</li>
								<li data-ng-show="ctrl.user.isAdmin()">
									<a class="label label-warning" data-toggle="modal" data-target="#mdForm">
										<i class="fa fa-pencil"></i>
									</a>
								</li>
							</ul>
						</dd>
					</dl>
				</div>
				<div class="timeline-wrapper timeline-wrapper-last"></div>
			</div>
		</div>
		
		<div id="myDiagramDiv"></div>
		
		<div id="map"></div>
		
		<!--include:explain/mdCog-->
		<!--include:explain/mdForm-->
		<!--include:explain/mdMap-->
		<!--include:explain/mdGo-->
		
	</div>
<!--/define:main-->

<!--define:script-->
	<script type="text/javascript" src="js/lib/background.js"></script>
	<script type="text/javascript" src="js/lib/timeliner-2.31/js/timeliner.js"></script>
	<script type="text/javascript" src="js/lib/go-2.1/release/go.js"></script>
	<script type="text/javascript">
		var instances = {explain: ["map","collection","document","go"]};
	</script>
	<script type="text/javascript" src="js/explain2.js"></script>
<!--/define:script-->