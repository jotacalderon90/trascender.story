<!--use:_views/m.full-->

<!--define:title-->
	Mapas
<!--/define:title-->

<!--define:css-->

	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.2/dist/leaflet.css" />
	<link rel="stylesheet" href="css/timeline.css" />
	
	<style>
		html,body{
			height: 100%;
			margin: 0;
			overflow: hidden;
		}
		#full{
			width: 100%;
			height: 100%;
			
			background: url("https://st4.depositphotos.com/3125791/30137/v/600/depositphotos_301377572-stock-video-abstract-blue-motion-waving-dots.jpg") no-repeat center center fixed; 
			-webkit-background-size: cover;
			-moz-background-size: cover;
			-o-background-size: cover;
			background-size: cover;
		}
		
		/********/
		/*LOADER*/
		#background{
			position: fixed;
			width: 100%;
			height: 100%;
			background: black;
			z-index: 3;
			opacity: 0.5;
			display: none;
		}
		#loading{
			position: fixed;
			z-index: 4;
			top: 50%;
			width: 100%;
			text-align: center;
			display: none;
		}
		#loading i{
			font-size: 100px;
		}
		
		/******/
		/*MAPA*/
		#map{
			width: 100%;
			height: 105%;
			position: relative;
			z-index: 1;
		}
		.leaflet-marker-icon,
		.leaflet-marker-shadow {
			-webkit-animation: fadein 2s; /* Safari, Chrome and Opera > 12.1 */
			-moz-animation: fadein 2s; /* Firefox < 16 */
			-ms-animation: fadein 2s; /* Internet Explorer */
			-o-animation: fadein 2s; /* Opera < 12.1 */
			animation: fadein 2s;
		}
		@keyframes fadein {
			from { opacity: 0;}
			to   { opacity: 1;}
		}
		
		/***********/
		/*BUSCADOR*/
		
		#mdCog .modal-content {
			background: black;
			opacity: 0.5;
		}
		#mdCog .modal-content .form-control{
			background: inherit;
			color: white;
		}
		
		/*AUTOCOMPLETAR*/
		.ui-autocomplete{
			z-index: 9999;
		}
		.ui-widget-content{
			background: black;
			opacity: 0.5;
			color: white;
		}
		
		/****************/
		/*MODAL TEXTAREA*/
		
		#mdMap .modal-lg{
			width: 90%;
		}
		#mdMap .modal-content{
			background: black;
			opacity: 0.5;
		}
		#mdMap .modal-content textarea{
			background: inherit;
			height: 500px;
			color: white;
			font-size: 18px;
		}
		
		/************************/
		/*MODAL MAPA CONCEPTUAL*/
		
		#mdGo .modal{
			padding: 0px;
		}
		#mdGo .modal-dialog{
			margin: 0;
			padding: 0;
			height: 100%;
			width: 100%;
		}
		#mdGo .modal-content{
			background: inherit;
			height: 100%;
		}
		#myDiagramDiv{
			width: 100%;
			height: 100%;
		}
		#lockedGO{
			position: absolute;
			top: 0;
			left: 0;
			width: 200px;
			height: 75px;
			background: black;
			z-index: 999999;
		}
		
		/*********/
		/*TIMELINE*/
		#dvTimeline{
			position: absolute;
			top: 0px;
			left: 25px;
			width: 400px;
			height: 100%;
			z-index: 2;
			display: none;
			overflow: hidden;
			overflow-y: scroll;
		}
		#timeline{
			position: absolute;
			width: 100%;
			z-index: 4;
			max-width: 400px;
			word-wrap: break-word;
		}
		.timeline-wrapper-last{
			height: 1000px;
		}
		.bk{
			position: fixed;
			width: 400px;
			height: 100%;
			background: black;
			opacity: 0.75;
			z-index: 3;
		}
		.timeline-event-content{
			display: block;
		}
		
	</style>
	
<!--/define:css-->

<!--define:head-->
	<script src="https://unpkg.com/leaflet@1.0.2/dist/leaflet.js"></script>
	<script src="https://leaflet.github.io/Leaflet.draw/src/Leaflet.draw.js"></script>
	<script src="https://leaflet.github.io/Leaflet.draw/src/Leaflet.Draw.Event.js"></script>
	<script src="https://leaflet.github.io/Leaflet.draw/src/Toolbar.js"></script>
	<script src="https://leaflet.github.io/Leaflet.draw/src/Tooltip.js"></script>
	<script src="https://leaflet.github.io/Leaflet.draw/src/ext/GeometryUtil.js"></script>
	<script src="https://leaflet.github.io/Leaflet.draw/src/ext/LatLngUtil.js"></script>
	<script src="https://leaflet.github.io/Leaflet.draw/src/ext/LineUtil.Intersect.js"></script>
	<script src="https://leaflet.github.io/Leaflet.draw/src/ext/Polygon.Intersect.js"></script>
	<script src="https://leaflet.github.io/Leaflet.draw/src/ext/Polyline.Intersect.js"></script>
	<script src="https://leaflet.github.io/Leaflet.draw/src/ext/TouchEvents.js"></script>
	<script src="https://leaflet.github.io/Leaflet.draw/src/draw/DrawToolbar.js"></script>
	<script src="https://leaflet.github.io/Leaflet.draw/src/draw/handler/Draw.Feature.js"></script>
	<script src="https://leaflet.github.io/Leaflet.draw/src/draw/handler/Draw.SimpleShape.js"></script>
	<script src="https://leaflet.github.io/Leaflet.draw/src/draw/handler/Draw.Polyline.js"></script>
	<script src="https://leaflet.github.io/Leaflet.draw/src/draw/handler/Draw.Marker.js"></script>
	<script src="https://leaflet.github.io/Leaflet.draw/src/draw/handler/Draw.Circle.js"></script>
	<script src="https://leaflet.github.io/Leaflet.draw/src/draw/handler/Draw.CircleMarker.js"></script>
	<script src="https://leaflet.github.io/Leaflet.draw/src/draw/handler/Draw.Polygon.js"></script>
	<script src="https://leaflet.github.io/Leaflet.draw/src/draw/handler/Draw.Rectangle.js"></script>
	<script src="https://leaflet.github.io/Leaflet.draw/src/edit/EditToolbar.js"></script>
	<script src="https://leaflet.github.io/Leaflet.draw/src/edit/handler/EditToolbar.Edit.js"></script>
	<script src="https://leaflet.github.io/Leaflet.draw/src/edit/handler/EditToolbar.Delete.js"></script>
	<script src="https://leaflet.github.io/Leaflet.draw/src/Control.Draw.js"></script>
	<script src="https://leaflet.github.io/Leaflet.draw/src/edit/handler/Edit.Poly.js"></script>
	<script src="https://leaflet.github.io/Leaflet.draw/src/edit/handler/Edit.SimpleShape.js"></script>
	<script src="https://leaflet.github.io/Leaflet.draw/src/edit/handler/Edit.Rectangle.js"></script>
	<script src="https://leaflet.github.io/Leaflet.draw/src/edit/handler/Edit.Marker.js"></script>
	<script src="https://leaflet.github.io/Leaflet.draw/src/edit/handler/Edit.CircleMarker.js"></script>
	<script src="https://leaflet.github.io/Leaflet.draw/src/edit/handler/Edit.Circle.js"></script>
	
	<script src="https://unpkg.com/topojson@3.0.2/dist/topojson.min.js"></script>
<!--/define:head-->

<!--define:main-->
	<!--<canvas id="matrix"></canvas>-->
	<div id="background"></div>
	<div id="loading">
		<i class="fa fa-spin fa-spinner"></i>
	</div>
	<div id="full" data-ng-app="myApp" data-ng-controller="explainCtrl as ctrl">
		
		<div id="map"></div>
		
		<div id="dvTimeline">
			<div class="bk"></div>
			<div id="timeline" class="timeline-container">
				<div class="timeline-wrapper" data-ng-repeat="year in ctrl.collection.years">
					<h2 class="timeline-time"><span>{{year.label}}</span></h2>
					<dl class="timeline-series" data-ng-repeat="data in year.data">
						<dt id="{{data._id}}" class="timeline-event start-open">
							<a>{{data.title}}</a>
						</dt>
						<dd class="timeline-event-content" id="{{data._id}}EX">
							<h3>{{data.fechat}}</h3>
							<img data-ng-src="{{data.img}}" alt="{{data.resume}}. {{data.fecha}}" title="{{data.resume}}. {{data.fecha}}" data-ng-click="ctrl.collection.setDOC(data)"/>
							<!--<small>{{data.resume}}.</small>-->
							<ul class="list-unstyled">
								<li data-ng-repeat="tag in data.tag">
									<a class="label label-success" href="/explain?tag={{tag}}" >{{tag}}</a>
								</li>
								<li data-ng-repeat="font in data.font">
									<a class="label label-primary" href="{{font}}" target="_blank">ver {{$index+1}}Â° referencia</a>
								</li>
								<li data-ng-show="ctrl.user.isAdmin()">
									<a class="label label-warning" data-toggle="modal" data-target="#mdForm">
										<i class="fa fa-pencil"></i>
									</a>
								</li>
							</ul>
						</dd>
					</dl>
				</div>
				<div class="timeline-wrapper timeline-wrapper-last"></div>
			</div>
		</div>
		
		<!--include:explain/mdCog-->
		<!--include:explain/mdForm-->
		<!--include:explain/mdMap-->
		<!--include:explain/mdGo-->
		
	</div>
<!--/define:main-->

<!--define:script-->
	<!--<script type="text/javascript" src="js/lib/background.js"></script>-->
	<script type="text/javascript" src="js/lib/timeliner-2.31/js/timeliner.js"></script>
	<script type="text/javascript" src="js/lib/go-2.1/release/go.js"></script>
	<script type="text/javascript">
		var instances = {explain: ["map","collection","document","go"]};
	</script>
	<script type="text/javascript" src="js/explain.js"></script>
<!--/define:script-->